(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"5miV":function(n,e,l){"use strict";l.d(e,"a",(function(){return d}));var t=l("mrSG"),o=l("ZZ/e"),i=l("PXR4"),c=l("HF2u"),r=l("xehS"),s=l("XhpJ"),a=l("8Y7J"),u=l("xgBC");let d=(()=>{class n{constructor(n,e,l,t,o,i){this.actionCtrl=n,this.modalCtrl=e,this.generalService=l,this.ionService=t,this.userAPI=o,this.storage=i}deleteAccount(){return t.b(this,void 0,void 0,(function*(){const n=yield this.actionCtrl.create({header:"Are you sure to delete your account ?",buttons:[{text:"Yes",icon:"checkmark",handler:()=>{this.submitDeletion().then(n=>{n&&this.allDone()}).catch(n=>{})}},{text:"No",icon:"close",role:"cancel"}]});yield n.present()}))}submitDeletion(){return new Promise((n,e)=>{this.storage.get("userInfo").then(l=>{this.ionService.showLoading(),this.userAPI.deleteAccount(l.id,l.token).subscribe(l=>{this.ionService.closeLoading(),1===l.RESPONSECODE?n(!0):(this.ionService.presentToast(l.RESPONSE),e(!1))},n=>{this.ionService.presentToast("Account Deletion Failed due to the server"),e(!1)})})})}allDone(){return t.b(this,void 0,void 0,(function*(){const n=yield this.modalCtrl.create({component:i.a});return n.onDidDismiss().then(()=>{this.generalService.logOut()}),yield n.present()}))}}return n.ngInjectableDef=a["\u0275\u0275defineInjectable"]({factory:function(){return new n(a["\u0275\u0275inject"](o.a),a["\u0275\u0275inject"](o.Kb),a["\u0275\u0275inject"](c.a),a["\u0275\u0275inject"](r.a),a["\u0275\u0275inject"](s.a),a["\u0275\u0275inject"](u.b))},token:n,providedIn:"root"}),n})()},GeNc:function(n,e,l){"use strict";l.r(e);var t=l("8Y7J");class o{}var i=l("pMnS"),c=l("oBZk"),r=l("ZZ/e"),s=l("mrSG"),a=l("10do"),u=l("HF2u"),d=l("5miV"),g=l("Tddt"),h=l("xehS");class m{constructor(n,e,l,t,o,i,c,r){this.navCtrl=n,this.storage=e,this.subscriptionAPI=l,this.modalCtrl=t,this.ionService=o,this.generalService=i,this.router=c,this.memberService=r}ngOnInit(){}ionViewWillEnter(){this.initData()}initData(){this.storage.get("planInfo").then(n=>{console.log(n),n&&(this.daysLeft=n.days_left,this.currentPlanName=n.name)}),this.storage.get("userInfo").then(n=>{this.userID=n.id,this.token=n.token})}goback(){this.navCtrl.back()}activateFreePlan(n){this.ionService.showLoading(),this.subscriptionAPI.activatefreesubscription(1,this.userID,this.token).subscribe(e=>{console.log(e),1===e.RESPONSECODE?this.downgradeDomains(n).then(n=>{console.log(n),this.ionService.closeLoading(),n?this.generalService.updatePlanInfo(this.userID,this.token).then(n=>{console.log(n),n&&this.router.navigate(["membership"],{replaceUrl:!0})}):(this.ionService.closeLoading(),this.ionService.presentToast("Downgrading plan failed."))}).catch(n=>{this.ionService.closeLoading(),this.ionService.presentToast("Server API error while downgrading with domains.")}):(this.ionService.closeLoading(),this.ionService.presentToast(e.RESPONSE))},n=>{this.ionService.closeLoading(),this.ionService.presentToast("Server API Problem while activating free plan")})}deleteAccount(){this.memberService.deleteAccount()}checkExDomainList(){return s.b(this,void 0,void 0,(function*(){const n=yield this.modalCtrl.create({component:a.a,componentProps:{selectedPlan:"Starter",currentPlan:this.currentPlanName,allowedCnt:1,reason:!0}});return n.onDidDismiss().then(n=>{"success"===n.role&&(console.log(n.data),this.activateFreePlan(n.data))}),yield n.present()}))}downgradeDomains(n){return this.ionService.showLoading(),new Promise((e,l)=>{this.subscriptionAPI.downgradePlan(n.domains,this.userID,this.token,n.feedback).subscribe(n=>{this.ionService.closeLoading(),console.log(n),1===n.RESPONSECODE?e(!0):(this.ionService.presentToast(n.RESPONSE),l(!1))},n=>{this.ionService.closeLoading(),this.ionService.presentToast("Somthing might be wrong"),l(!1)})})}}var p=l("xgBC"),b=l("iInd"),f=t["\u0275crt"]({encapsulation:0,styles:[["ion-header[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{text-align:center;font-size:17px}ion-header[_ngcontent-%COMP%]   ion-button.back[_ngcontent-%COMP%]{position:absolute;left:0}ion-content[_ngcontent-%COMP%]   .extra[_ngcontent-%COMP%]{background-color:#dcdcdc;border-radius:5px}ion-content[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{display:block;text-align:center}ion-content[_ngcontent-%COMP%]   ion-label.sorry[_ngcontent-%COMP%]{font-size:22px;margin-bottom:20px;font-weight:500}ion-content[_ngcontent-%COMP%]   ion-label.days-left[_ngcontent-%COMP%]{padding:10px 30px;font-size:16px}ion-content[_ngcontent-%COMP%]   ion-label.expire[_ngcontent-%COMP%]{margin-top:40px;margin-bottom:25px;font-weight:700;font-size:14px}ion-content[_ngcontent-%COMP%]   ion-label.revert[_ngcontent-%COMP%]{display:block;text-align:center;padding:0 42px;color:#484545}ion-content[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{display:flex;align-content:center;align-items:center;justify-content:center;padding:40px 10%}ion-content[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .each[_ngcontent-%COMP%]{width:42%;height:1.5px;background-color:#9b9898}ion-content[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:14px;padding:0 3%;color:#484849}ion-content[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{display:block;width:82%;height:53px;font-size:16px;margin:auto;--border-radius:30px;text-transform:none}ion-content[_ngcontent-%COMP%]   ion-button.to-free[_ngcontent-%COMP%]{margin-top:30px}ion-content[_ngcontent-%COMP%]   ion-button.delete-account[_ngcontent-%COMP%]{margin-bottom:30px}"]],data:{}});function v(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,12,"ion-header",[["class","small-header"]],null,null,null,c.fb,c.p)),t["\u0275did"](1,49152,null,0,r.D,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275eld"](2,0,null,0,10,"ion-toolbar",[["class","toolbar"]],null,null,null,c.Fb,c.P)),t["\u0275did"](3,49152,null,0,r.Eb,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275eld"](4,0,null,0,8,"ion-buttons",[],null,null,null,c.T,c.d)),t["\u0275did"](5,49152,null,0,r.n,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275eld"](6,0,null,0,2,"ion-title",[],null,null,null,c.Db,c.N)),t["\u0275did"](7,49152,null,0,r.Cb,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275ted"](-1,0,["Cancel Membership"])),(n()(),t["\u0275eld"](9,0,null,0,3,"ion-button",[["class","back"],["mode","ios"]],null,[[null,"click"]],(function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.goback()&&t),t}),c.S,c.c)),t["\u0275did"](10,49152,null,0,r.m,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{mode:[0,"mode"]},null),(n()(),t["\u0275eld"](11,0,null,0,1,"ion-icon",[["class","back"],["mode","ios"],["name","arrow-back"],["slot","icon-only"]],null,null,null,c.gb,c.q)),t["\u0275did"](12,49152,null,0,r.E,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],{mode:[0,"mode"],name:[1,"name"]},null),(n()(),t["\u0275eld"](13,0,null,null,30,"ion-content",[["padding",""]],null,null,null,c.bb,c.l)),t["\u0275did"](14,49152,null,0,r.w,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),t["\u0275did"](15,16384,null,0,r.f,[t.ElementRef],null,null),(n()(),t["\u0275eld"](16,0,null,0,2,"ion-label",[["class","sorry"]],null,null,null,c.mb,c.w)),t["\u0275did"](17,49152,null,0,r.P,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275ted"](-1,0,["SORRY TO SEE YOU GO!"])),(n()(),t["\u0275eld"](19,0,null,0,6,"div",[["class","extra"]],null,null,null,null,null)),(n()(),t["\u0275eld"](20,0,null,null,5,"ion-label",[["class","days-left"]],null,null,null,c.mb,c.w)),t["\u0275did"](21,49152,null,0,r.P,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275ted"](-1,0,["You still have "])),(n()(),t["\u0275eld"](23,0,null,0,1,"b",[],null,null,null,null,null)),(n()(),t["\u0275ted"](24,null,[""," days"])),(n()(),t["\u0275ted"](-1,0,[" left of your membership."])),(n()(),t["\u0275eld"](26,0,null,0,2,"ion-label",[["class","expire"]],null,null,null,c.mb,c.w)),t["\u0275did"](27,49152,null,0,r.P,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275ted"](-1,0,["ONCE MEMBERSHIP EXPIRES..."])),(n()(),t["\u0275eld"](29,0,null,0,2,"ion-label",[["class","revert"]],null,null,null,c.mb,c.w)),t["\u0275did"](30,49152,null,0,r.P,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275ted"](-1,0,["You can revert to the free service where you get to keep a single user and domain active."])),(n()(),t["\u0275eld"](32,0,null,0,2,"ion-button",[["class","red to-free"]],null,[[null,"click"]],(function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.checkExDomainList()&&t),t}),c.S,c.c)),t["\u0275did"](33,49152,null,0,r.m,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275ted"](-1,0,[" Revert to free service "])),(n()(),t["\u0275eld"](35,0,null,0,5,"div",[["class","line"]],null,null,null,null,null)),(n()(),t["\u0275eld"](36,0,null,null,0,"div",[["class","each left"]],null,null,null,null,null)),(n()(),t["\u0275eld"](37,0,null,null,2,"ion-label",[],null,null,null,c.mb,c.w)),t["\u0275did"](38,49152,null,0,r.P,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275ted"](-1,0,["OR"])),(n()(),t["\u0275eld"](40,0,null,null,0,"div",[["class","each right"]],null,null,null,null,null)),(n()(),t["\u0275eld"](41,0,null,0,2,"ion-button",[["class","gray"]],null,[[null,"click"]],(function(n,e,l){var t=!0;return"click"===e&&(t=!1!==n.component.deleteAccount()&&t),t}),c.S,c.c)),t["\u0275did"](42,49152,null,0,r.m,[t.ChangeDetectorRef,t.ElementRef,t.NgZone],null,null),(n()(),t["\u0275ted"](-1,0,[" Delete my account "]))],(function(n,e){n(e,10,0,"ios"),n(e,12,0,"ios","arrow-back")}),(function(n,e){n(e,24,0,e.component.daysLeft)}))}function C(n){return t["\u0275vid"](0,[(n()(),t["\u0275eld"](0,0,null,null,1,"app-cancel-membership",[],null,null,null,v,f)),t["\u0275did"](1,114688,null,0,m,[r.Lb,p.b,g.a,r.Kb,h.a,u.a,b.m,d.a],null,null)],(function(n,e){n(e,1,0)}),null)}var P=t["\u0275ccf"]("app-cancel-membership",m,C,{},{},[]),S=l("SVse"),O=l("s7LF");class R{}l.d(e,"CancelMembershipPageModuleNgFactory",(function(){return E}));var E=t["\u0275cmf"](o,[],(function(n){return t["\u0275mod"]([t["\u0275mpd"](512,t.ComponentFactoryResolver,t["\u0275CodegenComponentFactoryResolver"],[[8,[i.a,P]],[3,t.ComponentFactoryResolver],t.NgModuleRef]),t["\u0275mpd"](4608,S.m,S.l,[t.LOCALE_ID,[2,S.x]]),t["\u0275mpd"](4608,O.q,O.q,[]),t["\u0275mpd"](4608,r.c,r.c,[t.NgZone,t.ApplicationRef]),t["\u0275mpd"](4608,r.Kb,r.Kb,[r.c,t.ComponentFactoryResolver,t.Injector]),t["\u0275mpd"](4608,r.Ob,r.Ob,[r.c,t.ComponentFactoryResolver,t.Injector]),t["\u0275mpd"](1073742336,S.b,S.b,[]),t["\u0275mpd"](1073742336,O.p,O.p,[]),t["\u0275mpd"](1073742336,O.f,O.f,[]),t["\u0275mpd"](1073742336,r.Gb,r.Gb,[]),t["\u0275mpd"](1073742336,b.q,b.q,[[2,b.v],[2,b.m]]),t["\u0275mpd"](1073742336,R,R,[]),t["\u0275mpd"](1073742336,o,o,[]),t["\u0275mpd"](1024,b.k,(function(){return[[{path:"",component:m}]]}),[])])}))}}]);